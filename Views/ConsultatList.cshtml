@inherits Umbraco.Web.Mvc.UmbracoTemplatePage<ContentModels.ConsultatList>
@using ContentModels = Umbraco.Web.PublishedContentModels;
@{
  Layout = "Master.cshtml";
  List<IPublishedContent> consultants = new List<IPublishedContent>(Umbraco.Content(1155).Children().Where("Visible"));
  string consultantsJson = "";
}
<div class="maincontent">
  <div class="consultants">
    <div class="container">
      <div class="row">
        @foreach(var consultant in consultants){
          string image = "";
          if(consultant.HasValue("profileImage")){
            image = (string)consultant.GetPropertyValue<IPublishedContent>("profileImage").GetCropUrl("thumb");
          }
          string speciality = (string)consultant.GetPropertyValue("customSpeciality");
          string location = (string)consultant.GetPropertyValue("location");
          consultantsJson += '{n:\""+consultant.Name + "\",s:\""+speciality + "\",l:\""+location + "\"}";
          <div class="col-md-4">
            <a href="@consultant.Url">
              <img src="@image" alt="@consultant.Name is a @speciality at Circle @location" />
              <div>
                <h3 class="normal">@consultant.Name</h3>
                <p class="smaller">@speciality</p>
                <p class="smaller">Circle @location</p>
              </div>
            </a>
          </div>
        }
      </div>
    </div>
  </div>
</div>
<script>
    var consultants = [@consultantsJson];
    console.log(consultants);
</script>