@inherits Umbraco.Web.Mvc.UmbracoTemplatePage<ContentModels.Consultant>
@using ContentModels = Umbraco.Web.PublishedContentModels;
@{
  Layout = "Master.cshtml";
  string location = Model.Content.GetPropertyValue<string>("location");
  string speciality = "";
  string customPhone = "";
  string phone = "";
  string phoneforlink = "";
  
  if (Model.Content.HasValue("customSpeciality")){
    speciality = Model.Content.GetPropertyValue<string>("customSpeciality");
  }
  if (Model.Content.HasValue("customPhone")){
    customPhone = Model.Content.GetPropertyValue<string>("customPhone");
  }
  
  if (location == "Bath Hospital"){
    phone = "01761 422 222"; phoneforlink="01761422222";
  } else if (location == "Reading Hospital"){
    phone = "0118 922 6888"; phoneforlink = "01189226888";
  } else if (location == "Nottingham"){
    phone = "0115 970 5800"; phoneforlink = "01159705800";
  }
	
  if (!String.IsNullOrEmpty(customPhone)){ phone = customPhone; }
	
  string profileImage = "#"; //default profile image
  if (Model.Content.HasValue("profileImage") == true){
    profileImage = Model.Content.GetPropertyValue<IPublishedContent>("profileImage").Url;
  }
  
  string videoUrl = "";
  bool showVideo = false;
  if(Model.Content.GetPropertyValue<string[]>("youtubeVideos").Length > 0){
    showVideo = true;
    videoUrl = Model.Content.GetPropertyValue<string[]>("youtubeVideos")[0];
  }
  
  var treatments = Model.Content.GetPropertyValue<IEnumerable<IPublishedContent>>("treatments");
  var units = Model.Content.GetPropertyValue<IEnumerable<IPublishedContent>>("units");
  var specialities = Model.Content.GetPropertyValue<IEnumerable<IPublishedContent>>("specialities");

}

<div class="container">
  <div class="row profile">
    <div class="col-5">
      <img src="@profileImage" alt="@Model.Content.Name is a consultant @speciality at Circle @location" />
    </div>
    <div class="col">
        <h1>@Model.Content.Name</h1>
        <h2>@speciality</h2>
        <p>@Umbraco.Field("qualifications", altText:"")</p>
        <p><svg height="20" viewBox="0 0 1792 1792"><path d="M576 1312v64q0 13-9.5 22.5t-22.5 9.5h-64q-13 0-22.5-9.5t-9.5-22.5v-64q0-13 9.5-22.5t22.5-9.5h64q13 0 22.5 9.5t9.5 22.5zm0-256v64q0 13-9.5 22.5t-22.5 9.5h-64q-13 0-22.5-9.5t-9.5-22.5v-64q0-13 9.5-22.5t22.5-9.5h64q13 0 22.5 9.5t9.5 22.5zm256 0v64q0 13-9.5 22.5t-22.5 9.5h-64q-13 0-22.5-9.5t-9.5-22.5v-64q0-13 9.5-22.5t22.5-9.5h64q13 0 22.5 9.5t9.5 22.5zm-256-256v64q0 13-9.5 22.5t-22.5 9.5h-64q-13 0-22.5-9.5t-9.5-22.5v-64q0-13 9.5-22.5t22.5-9.5h64q13 0 22.5 9.5t9.5 22.5zm768 512v64q0 13-9.5 22.5t-22.5 9.5h-64q-13 0-22.5-9.5t-9.5-22.5v-64q0-13 9.5-22.5t22.5-9.5h64q13 0 22.5 9.5t9.5 22.5zm-256-256v64q0 13-9.5 22.5t-22.5 9.5h-64q-13 0-22.5-9.5t-9.5-22.5v-64q0-13 9.5-22.5t22.5-9.5h64q13 0 22.5 9.5t9.5 22.5zm-256-256v64q0 13-9.5 22.5t-22.5 9.5h-64q-13 0-22.5-9.5t-9.5-22.5v-64q0-13 9.5-22.5t22.5-9.5h64q13 0 22.5 9.5t9.5 22.5zm512 256v64q0 13-9.5 22.5t-22.5 9.5h-64q-13 0-22.5-9.5t-9.5-22.5v-64q0-13 9.5-22.5t22.5-9.5h64q13 0 22.5 9.5t9.5 22.5zm-256-256v64q0 13-9.5 22.5t-22.5 9.5h-64q-13 0-22.5-9.5t-9.5-22.5v-64q0-13 9.5-22.5t22.5-9.5h64q13 0 22.5 9.5t9.5 22.5zm256 0v64q0 13-9.5 22.5t-22.5 9.5h-64q-13 0-22.5-9.5t-9.5-22.5v-64q0-13 9.5-22.5t22.5-9.5h64q13 0 22.5 9.5t9.5 22.5zm-256 864h384v-1152h-256v32q0 40-28 68t-68 28h-448q-40 0-68-28t-28-68v-32h-256v1152h384v-224q0-13 9.5-22.5t22.5-9.5h320q13 0 22.5 9.5t9.5 22.5v224zm0-1184v-320q0-13-9.5-22.5t-22.5-9.5h-64q-13 0-22.5 9.5t-9.5 22.5v96h-128v-96q0-13-9.5-22.5t-22.5-9.5h-64q-13 0-22.5 9.5t-9.5 22.5v320q0 13 9.5 22.5t22.5 9.5h64q13 0 22.5-9.5t9.5-22.5v-96h128v96q0 13 9.5 22.5t22.5 9.5h64q13 0 22.5-9.5t9.5-22.5zm512-32v1280q0 26-19 45t-45 19h-1280q-26 0-45-19t-19-45v-1280q0-26 19-45t45-19h320v-288q0-40 28-68t68-28h448q40 0 68 28t28 68v288h320q26 0 45 19t19 45z"/></svg>Circle @location</p>
        <p><a href="tel:@phoneforlink"><svg height="20" viewBox="0 0 1792 1792"><path d="M1600 1240q0 27-10 70.5t-21 68.5q-21 50-122 106-94 51-186 51-27 0-53-3.5t-57.5-12.5-47-14.5-55.5-20.5-49-18q-98-35-175-83-127-79-264-216t-216-264q-48-77-83-175-3-9-18-49t-20.5-55.5-14.5-47-12.5-57.5-3.5-53q0-92 51-186 56-101 106-122 25-11 68.5-21t70.5-10q14 0 21 3 18 6 53 76 11 19 30 54t35 63.5 31 53.5q3 4 17.5 25t21.5 35.5 7 28.5q0 20-28.5 50t-62 55-62 53-28.5 46q0 9 5 22.5t8.5 20.5 14 24 11.5 19q76 137 174 235t235 174q2 1 19 11.5t24 14 20.5 8.5 22.5 5q18 0 46-28.5t53-62 55-62 50-28.5q14 0 28.5 7t35.5 21.5 25 17.5q25 15 53.5 31t63.5 35 54 30q70 35 76 53 3 7 3 21z"/></svg>@phone</a></p>
    </div>
  </div>
</div>
<div class="greyback maincontent">
  <div class="container">
    <div class="row">
      <div class="col-md-8">
          @Umbraco.Field("profile", altText:"")
      </div>
      <div class="col">
        @Umbraco.RenderMacro("renderUmbracoForm", new {FormGuid="87a8b37a-b171-42a0-be1d-3b14737d8c02", FormTheme="", ExcludeScripts="0"})
      </div>
    </div>
  </div>
</div>
@if (showVideo){
  <div class="container video">
    <div>
      <div>
        <iframe src=" @videoUrl " width="640" height="360" allowfullscreen="allowfullscreen"></iframe>
      </div>  
    </div>
  </div>
}
@if(treatments.Any()){
  <div class="boxlist">
    <div  class="container">
      <div class="row">
        <div class="col-12"><h2>Treatments offered by @Model.Content.Name</h2></div>
        <div class="col">
          <p>
            @foreach (var treatment in treatments){
              <a href="@treatment.Url">@treatment.Name <svg height="17" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1171 960q0 13-10 23l-466 466q-10 10-23 10t-23-10l-50-50q-10-10-10-23t10-23l393-393-393-393q-10-10-10-23t10-23l50-50q10-10 23-10t23 10l466 466q10 10 10 23z"/></svg></a>
            }
          </p>
        </div>
      </div>
    </div>
  </div>
}
